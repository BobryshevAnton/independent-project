function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},l=t.parcelRequiref5be;null==l&&((l=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var l={id:e,exports:{}};return n[e]=l,t.call(l.exports,l,l.exports),l.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequiref5be=l),l.register("7K24o",(function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}}));var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,t,n){s.default(e,t),t.set(e,n)};var i,s=(i=l("7K24o"))&&i.__esModule?i:{default:i};var r=new WeakMap,c=new WeakMap;class d{async getMovies(e=this.page){try{return await fetch(`${this.BASE_URL}trending/movie/day${this.API_KEY}&page=${e}`).then((e=>e.json()))}catch(e){console.log(e)}}getSearchMovie(e,t){try{return fetch(`${this.BASE_URL}search/movie${this.API_KEY}&query=${e}&page=${t}`).then((e=>e.json()))}catch(e){console.log(e)}}async getGanres(){try{return await fetch(`${this.BASE_URL}genre/movie/list${this.API_KEY}`).then((e=>e.json()))}catch(e){console.log(e)}}resetPage(){this.page=1}constructor(){e(o)(this,r,{writable:!0,value:"https://api.themoviedb.org/3/"}),e(o)(this,c,{writable:!0,value:"?api_key=7a4cd4317772102a9b88ef6a54b71590"}),this.page=1,this.BASE_URL="https://api.themoviedb.org/3/",this.API_KEY="?api_key=7a4cd4317772102a9b88ef6a54b71590"}}let u;function g(e){let t=[];e.forEach((e=>{let n=u.find((t=>t.id===e));t.push(n)}));const n=t.map((e=>e.name));let a=[];return n.map((e=>{e.length>10&&(e=e.slice(0,8)+"..."),a.push(e)})),a}(new d).getGanres().then((e=>{u=e.genres}));new d;const h=document.querySelector(".gallery-container"),p=document.querySelector(".backdrop");function f({results:e}){const t=document.querySelector(".modal-block"),n=document.querySelector("[data-modal]"),a=[...e];h.addEventListener("click",(function(e){n.classList.toggle("is-hidden"),a.map((n=>{if(n.original_title===e.target.alt){let e=g(n.genre_ids);e=e.length>2?e.slice(0,2).join(", ")+", Other":e.join(", ");const a=`\n      <div class="modal-films">\n        <img\n          class="modal-pictures"\n          src="${`https://image.tmdb.org/t/p/w500${n.poster_path}`}"\n          alt="${n.original_title}"\n          width="375px"\n        />\n      </div>\n      <div class="modal-info">\n        <h2 class="modal-title">${n.original_title}</h2>\n        <table class="modal-info__film">\n          <tr>\n            <td class="modal-info__left">Vote / Votes</td>\n            <td class="modal-info__right">\n              <span class="modal-span">${n.vote_average}</span>/${n.vote_count}\n            </td>\n          </tr>\n          <tr>\n            <td class="modal-info__left">Popularity</td>\n            <td class="modal-info__right">${n.popularity}</td>\n          </tr>\n          <tr>\n            <td class="modal-info__left">Original Title</td>\n            <td class="modal-info__right">${n.original_title}</td>\n          </tr>\n          <tr>\n            <td class="modal-info__left">Genre</td>\n            <td class="modal-info__right">${e}</td>\n          </tr>\n        </table>\n\n        <div class="modal-bottom">\n          <h2 class="modal-bottom__title">About</h2>\n          <p class="modal-bottom__text">\n            ${n.overview}\n          </p>\n        </div>\n        <div class="modal-button__section">\n          <button class="modal__btn-libryary" type="button">\n            add to Watched\n          </button>\n          <button class="modal__btn-libryary" type="button">queue</button>\n        </div>\n      </div>\n    `;return t.innerHTML="",t.insertAdjacentHTML("afterbegin",a)}}))})),p.addEventListener("click",(function(e){e.currentTarget===e.target&&n.classList.toggle("is-hidden")})),window.addEventListener("keydown",(function(e){"Escape"===e.code&&n.classList.toggle("is-hidden")}))}new d;const m=document.querySelector(".gallery-container");function _({results:e}){m.innerHTML="";const t=e.map((({poster_path:e,title:t,release_date:n,vote_average:a,genre_ids:l})=>{let o=`https://image.tmdb.org/t/p/w500${e}`,i=`${t}`;const s=`${n.slice(0,4)}`;let r=g(l);return e||(o="https://i.ibb.co/JyBCdzw/sinema-empty.jpg"),i.length>25&&(i=i.slice(0,30)+"..."),r=r.length>2?r.slice(0,2).join(", ")+", Other":r.join(", "),`<li class="gallery-box">\n    <div class="gallery-card">\n      <img\n        class="gallery-img"\n        src="${o}"\n        alt="${i}"\n        loading="lazy"\n      />\n    </div>\n    <h1 class="gallery-title">${i}</h1>\n    <div class="gallery-info">\n      <p class="gallery-ganre">${r}</p>\n      <p class="gallery-year">${s}</p>\n      <p class="gallery-average">${a}</p>\n    </div>\n  </li>\n      `})).join("");m.insertAdjacentHTML("beforeend",t),f({results:e})}const v=document.querySelector(".header__form-search");document.querySelector(".gallery-container");let y="",b=1;v.addEventListener("submit",(function(e){e.preventDefault();const{elements:{search:t}}=e.currentTarget;if(y=t.value,b+=1,""===y)return void $.classList.remove("hiden");$.classList.add("hiden");w.getSearchMovie(y,b).then((e=>{_(e)}))}));const $=document.querySelector(".text-empty");$.classList.add("hiden"),$.textContent="Search result not successful. Enter the correct movie name...";const w=new d;y="red",w.getSearchMovie(y,b).then((e=>{_(e)}));
//# sourceMappingURL=libryary.76b85ab3.js.map
