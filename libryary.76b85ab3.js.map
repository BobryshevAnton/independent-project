{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_check_private_redeclaration.js","node_modules/@swc/helpers/lib/_class_private_field_init.js","src/js/searchApi.js","src/js/create-ganres.js","src/js/modal-film.js","src/js/create-gallery.js","src/js/search.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _checkPrivateRedeclaration;\nfunction _checkPrivateRedeclaration(obj, privateCollection) {\n    if (privateCollection.has(obj)) {\n        throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classPrivateFieldInit;\nvar _checkPrivateRedeclaration = _interopRequireDefault(require(\"./_check_private_redeclaration\"));\nfunction _classPrivateFieldInit(obj, privateMap, value) {\n    (0, _checkPrivateRedeclaration).default(obj, privateMap);\n    privateMap.set(obj, value);\n}\nfunction _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n        default: obj\n    };\n}\n","export default class SearchApi {\n  #BASE_URL = 'https://api.themoviedb.org/3/';\n  #API_KEY = '?api_key=7a4cd4317772102a9b88ef6a54b71590';\n\n  constructor() {\n    this.page = 1;\n    this.BASE_URL = 'https://api.themoviedb.org/3/';\n    this.API_KEY = '?api_key=7a4cd4317772102a9b88ef6a54b71590';\n  }\n\n  async getMovies(page = this.page) {\n    const trending = 'trending';\n    const mediaType = 'movie';\n    const timeWindow = 'day';\n\n    try {\n      return await fetch(\n        `${this.BASE_URL}${trending}/${mediaType}/${timeWindow}${this.API_KEY}&page=${page}`\n      ).then(res => res.json());\n    } catch (arr) {\n      console.log(arr);\n    }\n  }\n\n  getSearchMovie(searchFilm, page) {\n    try {\n      return fetch(\n        `${this.BASE_URL}search/movie${this.API_KEY}&query=${searchFilm}&page=${page}`\n      ).then(res => res.json());\n    } catch (arr) {\n      console.log(arr);\n    }\n  }\n\n  async getGanres() {\n    const genre = 'genre';\n    const option = 'movie';\n    const list = 'list';\n\n    try {\n      return await fetch(\n        `${this.BASE_URL}${genre}/${option}/${list}${this.API_KEY}`\n      ).then(res => res.json());\n    } catch (arr) {\n      console.log(arr);\n    }\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n}\n","import SearchApi from './searchApi';\n// import { createGallery } from './create-gallery';\n\nconst searchApi = new SearchApi();\n\nlet genresArr;\nlet ganre;\nsearchApi.getGanres().then(data => {\n  genresArr = data.genres;\n});\n\nexport default function createGanres(genre_ids) {\n  let curentGenres = [];\n\n  genre_ids.forEach(element => {\n    let obj = genresArr.find(el => el.id === element);\n    curentGenres.push(obj);\n  });\n\n  const genresNames = curentGenres.map(el => el.name);\n  let newGenresNames = [];\n\n  genresNames.map(elem => {\n    if (elem.length > 10) {\n      elem = elem.slice(0, 8) + '...';\n    }\n    elem;\n    newGenresNames.push(elem);\n  });\n\n  return newGenresNames;\n}\n","import SearchApi from './searchApi';\nimport createGanres from './create-ganres';\nconst searchApi = new SearchApi();\nconst indexGallery = document.querySelector('.gallery-container');\nconst backdropModal = document.querySelector('.backdrop');\n\nexport default function modalFilm({ results }) {\n  const modalCont = document.querySelector('.modal-block');\n  const modal = document.querySelector('[data-modal]');\n  const filmMass = [...results];\n\n  indexGallery.addEventListener('click', handleClick);\n  function handleClick(evt) {\n    modal.classList.toggle('is-hidden');\n\n    filmMass.map(elem => {\n      if (elem.original_title === evt.target.alt) {\n        let ganresTitle = createGanres(elem.genre_ids);\n        if (ganresTitle.length > 2) {\n          ganresTitle = ganresTitle.slice(0, 2).join(', ') + ', Other';\n        } else {\n          ganresTitle = ganresTitle.join(', ');\n        }\n        let baseImgFilmModal = `https://image.tmdb.org/t/p/w500${elem.poster_path}`;\n\n        const markupModal = `\n      <div class=\"modal-films\">\n        <img\n          class=\"modal-pictures\"\n          src=\"${baseImgFilmModal}\"\n          alt=\"${elem.original_title}\"\n          width=\"375px\"\n        />\n      </div>\n      <div class=\"modal-info\">\n        <h2 class=\"modal-title\">${elem.original_title}</h2>\n        <table class=\"modal-info__film\">\n          <tr>\n            <td class=\"modal-info__left\">Vote / Votes</td>\n            <td class=\"modal-info__right\">\n              <span class=\"modal-span\">${elem.vote_average}</span>/${elem.vote_count}\n            </td>\n          </tr>\n          <tr>\n            <td class=\"modal-info__left\">Popularity</td>\n            <td class=\"modal-info__right\">${elem.popularity}</td>\n          </tr>\n          <tr>\n            <td class=\"modal-info__left\">Original Title</td>\n            <td class=\"modal-info__right\">${elem.original_title}</td>\n          </tr>\n          <tr>\n            <td class=\"modal-info__left\">Genre</td>\n            <td class=\"modal-info__right\">${ganresTitle}</td>\n          </tr>\n        </table>\n\n        <div class=\"modal-bottom\">\n          <h2 class=\"modal-bottom__title\">About</h2>\n          <p class=\"modal-bottom__text\">\n            ${elem.overview}\n          </p>\n        </div>\n        <div class=\"modal-button__section\">\n          <button class=\"modal__btn-libryary\" type=\"button\">\n            add to Watched\n          </button>\n          <button class=\"modal__btn-libryary\" type=\"button\">queue</button>\n        </div>\n      </div>\n    `;\n        modalCont.innerHTML = '';\n        return modalCont.insertAdjacentHTML('afterbegin', markupModal);\n      }\n    });\n  }\n  backdropModal.addEventListener('click', handleCloseClick);\n  function handleCloseClick(evt) {\n    if (evt.currentTarget === evt.target) {\n      modal.classList.toggle('is-hidden');\n    }\n  }\n  window.addEventListener('keydown', onEscape);\n\n  function onEscape(evt) {\n    if (evt.code === 'Escape') {\n      modal.classList.toggle('is-hidden');\n    }\n  }\n}\n","import SearchApi from './searchApi';\nimport createGanres from './create-ganres';\nimport modalFilm from './modal-film';\nconst searchApi = new SearchApi();\nconst indexGallery = document.querySelector('.gallery-container');\n// const modalOpen = document.querySelector('.gallery-box');\n\nexport function createGallery({ results }) {\n  indexGallery.innerHTML = '';\n\n  const markup = results\n    .map(({ poster_path, title, release_date, vote_average, genre_ids }) => {\n      let emptyImg = 'https://i.ibb.co/JyBCdzw/sinema-empty.jpg';\n      let baseImg = `https://image.tmdb.org/t/p/w500${poster_path}`;\n      let baseTitle = `${title}`;\n      const baseDate = `${release_date.slice(0, 4)}`;\n      let ganresTitle = createGanres(genre_ids);\n\n      if (!poster_path) {\n        baseImg = emptyImg;\n      }\n      if (baseTitle.length > 25) {\n        baseTitle = baseTitle.slice(0, 30) + '...';\n      } else {\n        baseTitle;\n      }\n      if (ganresTitle.length > 2) {\n        ganresTitle = ganresTitle.slice(0, 2).join(', ') + ', Other';\n      } else {\n        ganresTitle = ganresTitle.join(', ');\n      }\n\n      return `<li class=\"gallery-box\">\n    <div class=\"gallery-card\">\n      <img\n        class=\"gallery-img\"\n        src=\"${baseImg}\"\n        alt=\"${baseTitle}\"\n        loading=\"lazy\"\n      />\n    </div>\n    <h1 class=\"gallery-title\">${baseTitle}</h1>\n    <div class=\"gallery-info\">\n      <p class=\"gallery-ganre\">${ganresTitle}</p>\n      <p class=\"gallery-year\">${baseDate}</p>\n      <p class=\"gallery-average\">${vote_average}</p>\n    </div>\n  </li>\n      `;\n    })\n    .join('');\n\n  indexGallery.insertAdjacentHTML('beforeend', markup);\n  modalFilm({ results });\n  //=== elem modal\n  //   const modalCont = document.querySelector('.modal-block');\n  //   const modal = document.querySelector('[data-modal]');\n\n  //   const filmMass = [...results];\n  //   console.log(filmMass);\n\n  //   indexGallery.addEventListener('click', handleClick);\n  //   function handleClick(evt) {\n  //     modal.classList.toggle('is-hidden');\n\n  //     filmMass.map(elem => {\n  //       if (elem.original_title === evt.target.alt) {\n  //         let ganresTitle = createGanres(elem.genre_ids);\n  //         if (ganresTitle.length > 2) {\n  //           ganresTitle = ganresTitle.slice(0, 2).join(', ') + ', Other';\n  //         } else {\n  //           ganresTitle = ganresTitle.join(', ');\n  //         }\n  //         let baseImgFilmModal = `https://image.tmdb.org/t/p/w500${elem.poster_path}`;\n  //         const markupModal = `\n\n  //       <div class=\"modal-films\">\n  //         <img\n  //           class=\"modal-pictures\"\n  //           src=\"${baseImgFilmModal}\"\n  //           alt=\"${elem.original_title}\"\n  //           width=\"375px\"\n  //         />\n  //       </div>\n  //       <div class=\"modal-info\">\n  //         <h2 class=\"modal-title\">${elem.original_title}</h2>\n  //         <table class=\"modal-info__film\">\n  //           <tr>\n  //             <td class=\"modal-info__left\">Vote / Votes</td>\n  //             <td class=\"modal-info__right\">\n  //               <span class=\"modal-span\">${elem.vote_average}</span>/${elem.vote_count}\n  //             </td>\n  //           </tr>\n  //           <tr>\n  //             <td class=\"modal-info__left\">Popularity</td>\n  //             <td class=\"modal-info__right\">${elem.popularity}</td>\n  //           </tr>\n  //           <tr>\n  //             <td class=\"modal-info__left\">Original Title</td>\n  //             <td class=\"modal-info__right\">${elem.original_title}</td>\n  //           </tr>\n  //           <tr>\n  //             <td class=\"modal-info__left\">Genre</td>\n  //             <td class=\"modal-info__right\">${ganresTitle}</td>\n  //           </tr>\n  //         </table>\n\n  //         <div class=\"modal-bottom\">\n  //           <h2 class=\"modal-bottom__title\">About</h2>\n  //           <p class=\"modal-bottom__text\">\n  //             ${elem.overview}\n  //           </p>\n  //         </div>\n  //         <div class=\"modal-button__section\">\n  //           <button class=\"modal__btn-libryary\" type=\"button\">\n  //             add to Watched\n  //           </button>\n  //           <button class=\"modal__btn-libryary\" type=\"button\">queue</button>\n  //         </div>\n  //       </div>\n  //     `;\n  //         modalCont.innerHTML = '';\n  //         return modalCont.insertAdjacentHTML('afterbegin', markupModal);\n  //       }\n  //     });\n  //   }\n}\n","import SearchApi from './searchApi';\nimport { createGallery } from './create-gallery';\n\nconst form = document.querySelector('.header__form-search');\nconst indexGallery = document.querySelector('.gallery-container');\nlet searchFilm = '';\nlet page = 1;\n\nform.addEventListener('submit', handleSubmit);\n\nconst anyText = document.querySelector('.text-empty');\nanyText.classList.add('hiden');\nanyText.textContent =\n  'Search result not successful. Enter the correct movie name...';\nconst searchApi = new SearchApi();\n\nstartPage();\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  const {\n    elements: { search },\n  } = event.currentTarget;\n  searchFilm = search.value;\n  page += 1;\n\n  if (searchFilm === '') {\n    anyText.classList.remove('hiden');\n    return;\n  } else {\n    anyText.classList.add('hiden');\n  }\n\n  searchApi.getSearchMovie(searchFilm, page).then(data => {\n    createGallery(data);\n  });\n}\nfunction startPage() {\n  searchFilm = 'red';\n  searchApi.getSearchMovie(searchFilm, page).then(data => {\n    createGallery(data);\n  });\n}\n"],"names":["Object","defineProperty","module","exports","value","default","obj","privateCollection","has","TypeError","$bb98491953509995$exports","privateMap","$bb98491953509995$var$_checkPrivateRedeclaration","set","parcelRequire","__esModule","$103c1df01808e877$var$_BASE_URL","WeakMap","$103c1df01808e877$var$_API_KEY","$103c1df01808e877$export$2e2bcd8739ae039","async","page","this","fetch","BASE_URL","API_KEY","then","res","json","arr","console","log","getSearchMovie","searchFilm","resetPage","constructor","$parcel$interopDefault","$83405f68e01ab306$var$genresArr","$83405f68e01ab306$export$2e2bcd8739ae039","genre_ids","curentGenres","forEach","element","find","el","id","push","genresNames","map","name","newGenresNames","elem","length","slice","getGanres","data","genres","$b89ac968f8ae7162$var$indexGallery","document","querySelector","$b89ac968f8ae7162$var$backdropModal","$b89ac968f8ae7162$export$2e2bcd8739ae039","results","modalCont","modal","filmMass","addEventListener","evt","classList","toggle","original_title","target","alt","ganresTitle","join","markupModal","poster_path","vote_average","vote_count","popularity","overview","innerHTML","insertAdjacentHTML","currentTarget","window","code","$745a349cc24e0bad$var$indexGallery","$745a349cc24e0bad$export$dac8b9bf675ebb55","markup","title","release_date","baseImg","baseTitle","baseDate","$b18fd23e9761f35d$var$form","$b18fd23e9761f35d$var$searchFilm","$b18fd23e9761f35d$var$page","event","preventDefault","elements","search","$b18fd23e9761f35d$var$anyText","remove","add","$b18fd23e9761f35d$var$searchApi","textContent"],"version":3,"file":"libryary.76b85ab3.js.map"}